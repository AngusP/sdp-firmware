%
%  FIRMWARE TECHNICAL SPECIFICATION
%

\section{Firmware}

\subsection{Important Source Files}

\paragraph{\texttt{firmware.ino}}
This is the main file which contains the \texttt{void setup()} and \texttt{void loop()} functions. The former only initializes the serial port, calls the \texttt{setup()} methods of other pivotal objects, and outputs \texttt{STARTUP} to indicate that the robot is ready to receive commands. On the other hand, the \texttt{loop} function handles asynchronous logic by checking the serial port for any new commands and synchronous logic by running processes (more on these below).

\paragraph{\texttt{SerialCommand.cpp}} This file provides a simple library whose purpose is to map command strings to callbacks which it then executes based on the input it reads from the serial port.

\paragraph{\texttt{CommandSet.cpp}} This object initializes \texttt{SerialCommand} and provides the callbacks to be called. There is one method for each command the robot can receive which then performs the necessary steps to fulfil it.

\paragraph{\texttt{Processes.cpp}} The object in this file manages processes, which are essentially tasks to be completed periodically but not necessarily as often as the \texttt{loop()} function is called. There is a process that is responsible for toggling an LED every second in order to indicate the robot is \textit{alive}. Other processes include one that polls the encoders on each motor to monitor how far they travelled and another one that potentially makes any adjustments necessary to account for errors or motor differences based on this information.

\paragraph{\texttt{State.cpp}} This is a very simple object which essentially only serves as a central storage space for various values which may change during runtime. Most notably, it contains the current information on each of the holonomic motors such as power or total distance travelled, and the state of a data transfer.

\paragraph{\texttt{SDPArduino.cpp}} This is a library based on the last year's winner team's firmware which declares several low-level utility functions providing convenient interface for bidirectional motor movement and halting.